<?xml version="1.0" encoding="UTF-8" standalone="no"?><mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="   http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd   http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd   http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="create-sales-transaction-test-suite.xml">
		<munit:parameterizations >
			<munit:parameterization name="common-configs" >
				<munit:parameters >
					<munit:parameter propertyName="app.env" value="DEV" />
					<munit:parameter propertyName="app.key" value="cambridge123456789" />
				</munit:parameters>
			</munit:parameterization>
		</munit:parameterizations>
	</munit:config>
	<munit:test description="Test" doc:id="6433ff51-b5f8-48b5-80b9-1adca22ff029" name="create-sales-transaction-success-test-suite">
		<munit:behavior>
			<munit-tools:mock-when doc:id="267f6c02-0752-42a3-8792-c397f3edece0" doc:name="Mock sales-db-sys-app POST /transaction" processor="flow-ref">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="sales-db-sys-app-http-request-subflow"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="a7f6df2b-a742-4622-8d35-448e22ca0223"/>
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload value="#[output application/json --- readUrl('classpath://sales-db-sys-app/createSalesTransactionRs.json', 'application/json')]"/>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:id="3d691b1f-2675-4d10-ac0f-9692a73fe492" doc:name="Mock sales-db-sys-app POST /transaction/items" processor="flow-ref">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="sales-db-sys-app-http-request-subflow"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="03f8a1c0-3067-466f-ac7a-f6867cf2b417"/>
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload value="#[output application/json --- readUrl('classpath://sales-db-sys-app/createSalesTransactionRs.json', 'application/json')]"/>
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution>
			<munit:set-event doc:id="11768f8b-08d5-4a54-a4a0-3ee4f81b259e" doc:name="Set Event">
				<munit:payload value="#[output application/json --- readUrl('classpath://request-payloads/createSalesTransactionRq.json', 'application/json')]"/>
			</munit:set-event>
			<flow-ref doc:id="85166db8-7813-4e85-bc23-c81796f9cf46" doc:name="Flow-ref to post:\transaction:application\json:sales-prc-app-config" name="post:\transaction:application\json:sales-prc-app-config"/>
		</munit:execution>
		<munit:validation>
			<munit-tools:verify-call doc:id="b56d87b9-3fa2-4de0-aad3-a70513fb3c99" doc:name="Verify call - Flow End" processor="logger">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="FLOW - END impl-create-sale-transaction-subflow"/>
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>
	<munit:test description="Test" doc:id="301bcdce-892b-4f21-9506-b2654df2ac72" expectedErrorType="APP:SALES-DB-SYS_ERROR" name="create-sales-transaction-failed-transation-post-test-suite">
		<munit:behavior>
			<munit-tools:mock-when doc:id="b17d07fb-feb6-4299-80f3-63a648f5250f" doc:name="Mock sales-db-sys-app POST /transaction" processor="flow-ref">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="sales-db-sys-app-http-request-subflow"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="a7f6df2b-a742-4622-8d35-448e22ca0223"/>
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload value="#[output application/json --- readUrl('classpath://sales-db-sys-app/createSalesTransactionFailureRs.json', 'application/json')]"/>
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution>
			<munit:set-event doc:id="4d0c106a-e08f-41d0-b56f-4edc7d0f2450" doc:name="Set Event">
				<munit:payload value="#[output application/json --- readUrl('classpath://request-payloads/createSalesTransactionRq.json', 'application/json')]"/>
			</munit:set-event>
			<flow-ref doc:id="c21c6acc-904c-4db0-bd5a-03654f86aaf3" doc:name="Flow-ref to post:\transaction:application\json:sales-prc-app-config" name="post:\transaction:application\json:sales-prc-app-config"/>
		</munit:execution>
	</munit:test>
	<munit:test description="Test" doc:id="74459aec-dda4-4a53-80c2-0ca6da5600fb" name="create-sales-transaction-failed-transation-items-post-test-suite">
		<munit:behavior>
			<munit-tools:mock-when doc:id="b6376329-3eba-4a7c-94d4-6c454198b869" doc:name="Mock sales-db-sys-app POST /transaction" processor="flow-ref">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="sales-db-sys-app-http-request-subflow"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="a7f6df2b-a742-4622-8d35-448e22ca0223"/>
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload value="#[output application/json --- readUrl('classpath://sales-db-sys-app/createSalesTransactionRs.json', 'application/json')]"/>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:id="0c6360d4-c945-478a-b6be-0dda62425317" doc:name="Mock sales-db-sys-app POST /transaction/items" processor="flow-ref">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="sales-db-sys-app-http-request-subflow"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="03f8a1c0-3067-466f-ac7a-f6867cf2b417"/>
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:error typeId="HTTP:CONNECTIVITY"/>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:id="3f9b18cb-859b-410e-87a3-84ce9dc0ee85" doc:name="Mock sales-db-sys-app DELETE  /transaction" processor="flow-ref">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="sales-db-sys-app-http-request-subflow"/>
					<munit-tools:with-attribute attributeName="doc:id" whereValue="2f840bda-7f6d-41ac-83d7-09aa16f2f460"/>
				</munit-tools:with-attributes>
				<munit-tools:then-return>
					<munit-tools:payload value="#[output application/json --- readUrl('classpath://sales-db-sys-app/createSalesTransactionRs.json', 'application/json')]"/>
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution>
			<munit:set-event doc:id="654cf989-1e72-4e87-a9dd-a5dac13aaffa" doc:name="Set Event">
				<munit:payload value="#[output application/json --- readUrl('classpath://request-payloads/createSalesTransactionRq.json', 'application/json')]"/>
			</munit:set-event>
			<flow-ref doc:id="33b476d8-64d1-47e7-a0bc-49b8a8a8166d" doc:name="Flow-ref to post:\transaction:application\json:sales-prc-app-config" name="post:\transaction:application\json:sales-prc-app-config"/>
		</munit:execution>
		<munit:validation>
			<munit-tools:verify-call doc:id="63ef1ad8-52c8-4649-a9b7-feb5aa48d698" doc:name="Verify call - Flow End" processor="logger">
				<munit-tools:with-attributes>
					<munit-tools:with-attribute attributeName="doc:name" whereValue="FLOW - END impl-create-sale-transaction-subflow"/>
				</munit-tools:with-attributes>
			</munit-tools:verify-call>
		</munit:validation>
	</munit:test>

</mule>